{
 "Resources": {
  "ApiLambdaRepoCAEE321E": {
   "Type": "AWS::ECR::Repository",
   "Properties": {
    "EmptyOnDelete": true,
    "ImageScanningConfiguration": {
     "ScanOnPush": true
    },
    "RepositoryPolicyText": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
       ],
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiLambdaRepo/Resource"
   }
  },
  "ApiImageBuildRole27E7F2D7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "codebuild.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "DependsOn": [
    "ApiLambdaRepoCAEE321E"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuild/Role/Resource"
   }
  },
  "ApiImageBuildRoleDefaultPolicy78F89BAC": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:eu-central-1:542508027791:log-group:/aws/codebuild/",
           {
            "Ref": "ApiImageBuild53994DE8"
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":logs:eu-central-1:542508027791:log-group:/aws/codebuild/",
           {
            "Ref": "ApiImageBuild53994DE8"
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "codebuild:CreateReportGroup",
        "codebuild:CreateReport",
        "codebuild:UpdateReport",
        "codebuild:BatchPutTestCases",
        "codebuild:BatchPutCodeCoverages"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":codebuild:eu-central-1:542508027791:report-group/",
          {
           "Ref": "ApiImageBuild53994DE8"
          },
          "-*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::cdk-hnb659fds-assets-542508027791-eu-central-1"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":s3:::cdk-hnb659fds-assets-542508027791-eu-central-1/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage",
        "ecr:CompleteLayerUpload",
        "ecr:UploadLayerPart",
        "ecr:InitiateLayerUpload",
        "ecr:PutImage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "ApiLambdaRepoCAEE321E",
         "Arn"
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ApiImageBuildRoleDefaultPolicy78F89BAC",
    "Roles": [
     {
      "Ref": "ApiImageBuildRole27E7F2D7"
     }
    ]
   },
   "DependsOn": [
    "ApiLambdaRepoCAEE321E"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuild/Role/DefaultPolicy/Resource"
   }
  },
  "ApiImageBuild53994DE8": {
   "Type": "AWS::CodeBuild::Project",
   "Properties": {
    "Artifacts": {
     "Type": "NO_ARTIFACTS"
    },
    "Cache": {
     "Type": "NO_CACHE"
    },
    "EncryptionKey": "alias/aws/s3",
    "Environment": {
     "ComputeType": "BUILD_GENERAL1_SMALL",
     "EnvironmentVariables": [
      {
       "Name": "REPO_URI",
       "Type": "PLAINTEXT",
       "Value": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::Select": [
            4,
            {
             "Fn::Split": [
              ":",
              {
               "Fn::GetAtt": [
                "ApiLambdaRepoCAEE321E",
                "Arn"
               ]
              }
             ]
            }
           ]
          },
          ".dkr.ecr.",
          {
           "Fn::Select": [
            3,
            {
             "Fn::Split": [
              ":",
              {
               "Fn::GetAtt": [
                "ApiLambdaRepoCAEE321E",
                "Arn"
               ]
              }
             ]
            }
           ]
          },
          ".",
          {
           "Ref": "AWS::URLSuffix"
          },
          "/",
          {
           "Ref": "ApiLambdaRepoCAEE321E"
          }
         ]
        ]
       }
      },
      {
       "Name": "IMAGE_TAG",
       "Type": "PLAINTEXT",
       "Value": "7948fafddcf016e67485ff14bc81bf0ef75aecfc55c7a6f944a182d996ff45a7"
      },
      {
       "Name": "SRC_BUCKET",
       "Type": "PLAINTEXT",
       "Value": "cdk-hnb659fds-assets-542508027791-eu-central-1"
      },
      {
       "Name": "SRC_KEY",
       "Type": "PLAINTEXT",
       "Value": "7948fafddcf016e67485ff14bc81bf0ef75aecfc55c7a6f944a182d996ff45a7.zip"
      },
      {
       "Name": "AWS_REGION",
       "Type": "PLAINTEXT",
       "Value": "eu-central-1"
      }
     ],
     "Image": "aws/codebuild/amazonlinux2-x86_64-standard:5.0",
     "ImagePullCredentialsType": "CODEBUILD",
     "PrivilegedMode": true,
     "Type": "LINUX_CONTAINER"
    },
    "ServiceRole": {
     "Fn::GetAtt": [
      "ApiImageBuildRole27E7F2D7",
      "Arn"
     ]
    },
    "Source": {
     "BuildSpec": "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"pre_build\": {\n      \"commands\": [\n        \"aws ecr get-login-password --region $AWS_REGION | docker login --username AWS --password-stdin $REPO_URI\",\n        \"aws s3 cp s3://$SRC_BUCKET/$SRC_KEY src.zip\",\n        \"mkdir -p src && unzip -q src.zip -d src && cd src\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"docker build -f Dockerfile.api -t $REPO_URI:$IMAGE_TAG .\",\n        \"docker push $REPO_URI:$IMAGE_TAG\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"files\": [\n      \"**/*\"\n    ],\n    \"discard-paths\": \"yes\"\n  }\n}",
     "Type": "NO_SOURCE"
    }
   },
   "DependsOn": [
    "ApiLambdaRepoCAEE321E"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuild/Resource"
   }
  },
  "ApiImageBuildTriggerServiceRoleDC7DB6B5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuildTrigger/ServiceRole/Resource"
   }
  },
  "ApiImageBuildTriggerServiceRoleDefaultPolicyB25EB8C7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "codebuild:StartBuild",
        "codebuild:BatchGetBuilds"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "ApiImageBuild53994DE8",
         "Arn"
        ]
       }
      },
      {
       "Action": "ecr:DescribeImages",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "ApiLambdaRepoCAEE321E",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ApiImageBuildTriggerServiceRoleDefaultPolicyB25EB8C7",
    "Roles": [
     {
      "Ref": "ApiImageBuildTriggerServiceRoleDC7DB6B5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuildTrigger/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ApiImageBuildTrigger9F9BDF25": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "ZipFile": "import boto3, os, time\ncb = boto3.client('codebuild')\necr = boto3.client('ecr')\ndef handler(event, context):\n    project = os.environ['PROJECT']\n    repo_name = os.environ['REPO_NAME']\n    image_tag = os.environ['IMAGE_TAG']\n    physical_id = f'ApiImageBuild-{image_tag}'\n    if event.get('RequestType') == 'Delete':\n        return {'PhysicalResourceId': event.get('PhysicalResourceId', physical_id), 'Data': {}}\n    resp = cb.start_build(projectName=project)\n    build_id = resp.get('build', {}).get('id')\n    if not build_id:\n        raise Exception('Failed to start CodeBuild build')\n    while True:\n        time.sleep(5)\n        res = cb.batch_get_builds(ids=[build_id])\n        b = (res.get('builds') or [{}])[0]\n        status = b.get('buildStatus')\n        if status in ('SUCCEEDED', 'FAILED', 'FAULT', 'STOPPED', 'TIMED_OUT'):\n            if status != 'SUCCEEDED':\n                raise Exception(f'Build {build_id} failed: {status}')\n            break\n    for _ in range(60):\n        try:\n            ecr.describe_images(repositoryName=repo_name, imageIds=[{'imageTag': image_tag}])\n            break\n        except Exception:\n            time.sleep(2)\n    return {'PhysicalResourceId': physical_id, 'Data': {'ImageTag': image_tag}}"
    },
    "Environment": {
     "Variables": {
      "PROJECT": {
       "Ref": "ApiImageBuild53994DE8"
      },
      "REPO_NAME": {
       "Ref": "ApiLambdaRepoCAEE321E"
      },
      "IMAGE_TAG": "7948fafddcf016e67485ff14bc81bf0ef75aecfc55c7a6f944a182d996ff45a7"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ApiImageBuildTriggerServiceRoleDC7DB6B5",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 900
   },
   "DependsOn": [
    "ApiImageBuildTriggerServiceRoleDefaultPolicyB25EB8C7",
    "ApiImageBuildTriggerServiceRoleDC7DB6B5"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuildTrigger/Resource"
   }
  },
  "ApiImageBuildProviderframeworkonEventServiceRole1C5CF09D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuildProvider/framework-onEvent/ServiceRole/Resource"
   }
  },
  "ApiImageBuildProviderframeworkonEventServiceRoleDefaultPolicyA090CBE0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ApiImageBuildTrigger9F9BDF25",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ApiImageBuildTrigger9F9BDF25",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ApiImageBuildProviderframeworkonEventServiceRoleDefaultPolicyA090CBE0",
    "Roles": [
     {
      "Ref": "ApiImageBuildProviderframeworkonEventServiceRole1C5CF09D"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuildProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ApiImageBuildProviderframeworkonEventDD7F66DB": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-542508027791-eu-central-1",
     "S3Key": "d9861ea7a45affd23e47a614acb2fddc6e45c20a891284c958187dafbf9ee36b.zip"
    },
    "Description": "AWS CDK resource provider framework - onEvent (RITAApi/ApiImageBuildProvider)",
    "Environment": {
     "Variables": {
      "USER_ON_EVENT_FUNCTION_ARN": {
       "Fn::GetAtt": [
        "ApiImageBuildTrigger9F9BDF25",
        "Arn"
       ]
      }
     }
    },
    "Handler": "framework.onEvent",
    "Role": {
     "Fn::GetAtt": [
      "ApiImageBuildProviderframeworkonEventServiceRole1C5CF09D",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 900
   },
   "DependsOn": [
    "ApiImageBuildProviderframeworkonEventServiceRoleDefaultPolicyA090CBE0",
    "ApiImageBuildProviderframeworkonEventServiceRole1C5CF09D"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/ApiImageBuildProvider/framework-onEvent/Resource",
    "aws:asset:path": "asset.d9861ea7a45affd23e47a614acb2fddc6e45c20a891284c958187dafbf9ee36b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "BuildApiImage": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "ApiImageBuildProviderframeworkonEventDD7F66DB",
      "Arn"
     ]
    },
    "RepoName": {
     "Ref": "ApiLambdaRepoCAEE321E"
    },
    "ImageTag": "7948fafddcf016e67485ff14bc81bf0ef75aecfc55c7a6f944a182d996ff45a7"
   },
   "DependsOn": [
    "ApiImageBuild53994DE8",
    "ApiImageBuildRoleDefaultPolicy78F89BAC",
    "ApiImageBuildRole27E7F2D7",
    "ApiLambdaRepoCAEE321E"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "RITAApi/BuildApiImage/Default"
   }
  },
  "RITAApiFnServiceRoleECB85610": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "BuildApiImage"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiFn/ServiceRole/Resource"
   }
  },
  "RITAApiFnServiceRoleDefaultPolicy40869C66": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ssm:GetParameter",
        "ssm:GetParameters",
        "ssm:GetParameterHistory"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:ssm:eu-central-1:542508027791:parameter/rita/agentcore/*",
        "arn:aws:ssm:eu-central-1:542508027791:parameter/rita/workflow-agent/*"
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": "arn:aws:lambda:eu-central-1:542508027791:function:RITAApi-RITAApiFn*"
      },
      {
       "Action": "bedrock-agentcore:InvokeAgentRuntime",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "bedrock-agentcore:GetAgentRuntimeEndpoint",
        "bedrock-agentcore:ListAgentRuntimeEndpoints"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ce:GetCostAndUsage",
        "ce:GetCostForecast",
        "ce:GetSavingsPlansCoverage",
        "ce:GetReservationCoverage",
        "ce:GetAnomalies"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "compute-optimizer:GetEC2InstanceRecommendations",
        "compute-optimizer:GetAutoScalingGroupRecommendations",
        "compute-optimizer:GetEBSVolumeRecommendations",
        "compute-optimizer:GetRDSInstanceRecommendations",
        "compute-optimizer:GetLambdaFunctionRecommendations"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ec2:DescribeInstances",
        "ec2:DescribeVolumes",
        "ec2:DescribeInstanceStatus",
        "ec2:StopInstances",
        "ec2:StartInstances",
        "ec2:ModifyInstanceAttribute",
        "ec2:ModifyVolume",
        "autoscaling:DescribeAutoScalingGroups",
        "autoscaling:DescribeLaunchConfigurations",
        "lambda:ListFunctions",
        "lambda:ListProvisionedConcurrencyConfigs",
        "lambda:GetProvisionedConcurrencyConfig",
        "lambda:GetFunctionConfiguration",
        "lambda:PutFunctionConcurrency",
        "lambda:UpdateFunctionConfiguration",
        "rds:DescribeDBInstances",
        "rds:ModifyDBInstance",
        "s3:ListAllMyBuckets",
        "s3:GetLifecycleConfiguration",
        "s3:PutLifecycleConfiguration",
        "cloudwatch:GetMetricStatistics",
        "cloudwatch:PutMetricData"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "scheduler:CreateSchedule",
        "scheduler:UpdateSchedule",
        "scheduler:DeleteSchedule",
        "scheduler:GetSchedule"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RITAApiFnServiceRoleDefaultPolicy40869C66",
    "Roles": [
     {
      "Ref": "RITAApiFnServiceRoleECB85610"
     }
    ]
   },
   "DependsOn": [
    "BuildApiImage"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RITAApiFn455ED49C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Architectures": [
     "x86_64"
    ],
    "Code": {
     "ImageUri": {
      "Fn::Join": [
       "",
       [
        {
         "Fn::Select": [
          4,
          {
           "Fn::Split": [
            ":",
            {
             "Fn::GetAtt": [
              "ApiLambdaRepoCAEE321E",
              "Arn"
             ]
            }
           ]
          }
         ]
        },
        ".dkr.ecr.",
        {
         "Fn::Select": [
          3,
          {
           "Fn::Split": [
            ":",
            {
             "Fn::GetAtt": [
              "ApiLambdaRepoCAEE321E",
              "Arn"
             ]
            }
           ]
          }
         ]
        },
        ".",
        {
         "Ref": "AWS::URLSuffix"
        },
        "/",
        {
         "Ref": "ApiLambdaRepoCAEE321E"
        },
        ":",
        {
         "Fn::GetAtt": [
          "BuildApiImage",
          "ImageTag"
         ]
        }
       ]
      ]
     }
    },
    "Environment": {
     "Variables": {
      "AGENTCORE_ID_PARAM": "/rita/agentcore/id",
      "AGENTCORE_ALIAS_PARAM": "/rita/agentcore/alias",
      "AGENTCORE_INVOKE_PARAM": "/rita/agentcore/invoke-arn",
      "AGENTCORE_ROLE_PARAM": "/rita/agentcore/role-arn"
     }
    },
    "MemorySize": 512,
    "PackageType": "Image",
    "Role": {
     "Fn::GetAtt": [
      "RITAApiFnServiceRoleECB85610",
      "Arn"
     ]
    },
    "Timeout": 300
   },
   "DependsOn": [
    "BuildApiImage",
    "RITAApiFnServiceRoleDefaultPolicy40869C66",
    "RITAApiFnServiceRoleECB85610"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiFn/Resource"
   }
  },
  "RITAApiGateway5FE42108": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Name": "RITAApi"
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Resource"
   }
  },
  "RITAApiGatewayCloudWatchRole14775921": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/CloudWatchRole/Resource"
   }
  },
  "RITAApiGatewayAccount8781CA17": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "RITAApiGatewayCloudWatchRole14775921",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "RITAApiGateway5FE42108"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Account"
   }
  },
  "RITAApiGatewayDeployment47B42072a8d5c9a68a283ca09b76f94f2bce053c": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Automatically created by the RestApi construct",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "DependsOn": [
    "RITAApiGatewayproxyANYD62D7763",
    "RITAApiGatewayproxyF913D4CA",
    "RITAApiGatewayANY4B40224D",
    "RITAApiGatewayv1analyzeGET6F42871E",
    "RITAApiGatewayv1analyzeOPTIONS73848AA7",
    "RITAApiGatewayv1analyze471F6DED",
    "RITAApiGatewayv1automationOPTIONSE307FF15",
    "RITAApiGatewayv1automationPOSTE2EB89B7",
    "RITAApiGatewayv1automation4AD26F7A",
    "RITAApiGatewayv1chatOPTIONS288C1EE6",
    "RITAApiGatewayv1chatPOSTD23135A5",
    "RITAApiGatewayv1chat19125C91",
    "RITAApiGatewayv1recommendGETDF983FC8",
    "RITAApiGatewayv1recommendOPTIONSAA5A0518",
    "RITAApiGatewayv1recommend5F0401FC",
    "RITAApiGatewayv18DD59987"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Deployment/Resource"
   }
  },
  "RITAApiGatewayDeploymentStageprod7E03EB91": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "RITAApiGatewayDeployment47B42072a8d5c9a68a283ca09b76f94f2bce053c"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    },
    "StageName": "prod"
   },
   "DependsOn": [
    "RITAApiGatewayAccount8781CA17"
   ],
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/DeploymentStage.prod/Resource"
   }
  },
  "RITAApiGatewayv18DD59987": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "RITAApiGateway5FE42108",
      "RootResourceId"
     ]
    },
    "PathPart": "v1",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/Resource"
   }
  },
  "RITAApiGatewayv1chat19125C91": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "RITAApiGatewayv18DD59987"
    },
    "PathPart": "chat",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/chat/Resource"
   }
  },
  "RITAApiGatewayv1chatOPTIONS288C1EE6": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "RITAApiGatewayv1chat19125C91"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/chat/OPTIONS/Resource"
   }
  },
  "RITAApiGatewayv1chatPOSTApiPermissionRITAApiRITAApiGateway6E112C5CPOSTv1chat0A11E0AA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/",
       {
        "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
       },
       "/POST/v1/chat"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/chat/POST/ApiPermission.RITAApiRITAApiGateway6E112C5C.POST..v1.chat"
   }
  },
  "RITAApiGatewayv1chatPOSTApiPermissionTestRITAApiRITAApiGateway6E112C5CPOSTv1chatA1A2BB2F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/test-invoke-stage/POST/v1/chat"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/chat/POST/ApiPermission.Test.RITAApiRITAApiGateway6E112C5C.POST..v1.chat"
   }
  },
  "RITAApiGatewayv1chatPOSTD23135A5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RITAApiFn455ED49C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "RITAApiGatewayv1chat19125C91"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/chat/POST/Resource"
   }
  },
  "RITAApiGatewayv1analyze471F6DED": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "RITAApiGatewayv18DD59987"
    },
    "PathPart": "analyze",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/analyze/Resource"
   }
  },
  "RITAApiGatewayv1analyzeOPTIONS73848AA7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "RITAApiGatewayv1analyze471F6DED"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/analyze/OPTIONS/Resource"
   }
  },
  "RITAApiGatewayv1analyzeGETApiPermissionRITAApiRITAApiGateway6E112C5CGETv1analyze061107D4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/",
       {
        "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
       },
       "/GET/v1/analyze"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/analyze/GET/ApiPermission.RITAApiRITAApiGateway6E112C5C.GET..v1.analyze"
   }
  },
  "RITAApiGatewayv1analyzeGETApiPermissionTestRITAApiRITAApiGateway6E112C5CGETv1analyze08EF947A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/test-invoke-stage/GET/v1/analyze"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/analyze/GET/ApiPermission.Test.RITAApiRITAApiGateway6E112C5C.GET..v1.analyze"
   }
  },
  "RITAApiGatewayv1analyzeGET6F42871E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RITAApiFn455ED49C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "RITAApiGatewayv1analyze471F6DED"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/analyze/GET/Resource"
   }
  },
  "RITAApiGatewayv1recommend5F0401FC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "RITAApiGatewayv18DD59987"
    },
    "PathPart": "recommend",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/recommend/Resource"
   }
  },
  "RITAApiGatewayv1recommendOPTIONSAA5A0518": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "RITAApiGatewayv1recommend5F0401FC"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/recommend/OPTIONS/Resource"
   }
  },
  "RITAApiGatewayv1recommendGETApiPermissionRITAApiRITAApiGateway6E112C5CGETv1recommend15F919ED": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/",
       {
        "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
       },
       "/GET/v1/recommend"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/recommend/GET/ApiPermission.RITAApiRITAApiGateway6E112C5C.GET..v1.recommend"
   }
  },
  "RITAApiGatewayv1recommendGETApiPermissionTestRITAApiRITAApiGateway6E112C5CGETv1recommend1EF87310": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/test-invoke-stage/GET/v1/recommend"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/recommend/GET/ApiPermission.Test.RITAApiRITAApiGateway6E112C5C.GET..v1.recommend"
   }
  },
  "RITAApiGatewayv1recommendGETDF983FC8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RITAApiFn455ED49C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "RITAApiGatewayv1recommend5F0401FC"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/recommend/GET/Resource"
   }
  },
  "RITAApiGatewayv1automation4AD26F7A": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "RITAApiGatewayv18DD59987"
    },
    "PathPart": "automation",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/automation/Resource"
   }
  },
  "RITAApiGatewayv1automationOPTIONSE307FF15": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "RITAApiGatewayv1automation4AD26F7A"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/automation/OPTIONS/Resource"
   }
  },
  "RITAApiGatewayv1automationPOSTApiPermissionRITAApiRITAApiGateway6E112C5CPOSTv1automation1C1A32CF": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/",
       {
        "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
       },
       "/POST/v1/automation"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/automation/POST/ApiPermission.RITAApiRITAApiGateway6E112C5C.POST..v1.automation"
   }
  },
  "RITAApiGatewayv1automationPOSTApiPermissionTestRITAApiRITAApiGateway6E112C5CPOSTv1automation47015C3A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/test-invoke-stage/POST/v1/automation"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/automation/POST/ApiPermission.Test.RITAApiRITAApiGateway6E112C5C.POST..v1.automation"
   }
  },
  "RITAApiGatewayv1automationPOSTE2EB89B7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RITAApiFn455ED49C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "RITAApiGatewayv1automation4AD26F7A"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/v1/automation/POST/Resource"
   }
  },
  "RITAApiGatewayproxyF913D4CA": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "RITAApiGateway5FE42108",
      "RootResourceId"
     ]
    },
    "PathPart": "{proxy+}",
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/{proxy+}/Resource"
   }
  },
  "RITAApiGatewayproxyANYApiPermissionRITAApiRITAApiGateway6E112C5CANYproxy5CDC2D20": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/",
       {
        "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
       },
       "/*/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/{proxy+}/ANY/ApiPermission.RITAApiRITAApiGateway6E112C5C.ANY..{proxy+}"
   }
  },
  "RITAApiGatewayproxyANYApiPermissionTestRITAApiRITAApiGateway6E112C5CANYproxyE492E4CA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/test-invoke-stage/*/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/{proxy+}/ANY/ApiPermission.Test.RITAApiRITAApiGateway6E112C5C.ANY..{proxy+}"
   }
  },
  "RITAApiGatewayproxyANYD62D7763": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "ANY",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RITAApiFn455ED49C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "RITAApiGatewayproxyF913D4CA"
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/{proxy+}/ANY/Resource"
   }
  },
  "RITAApiGatewayANYApiPermissionRITAApiRITAApiGateway6E112C5CANY0F030760": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/",
       {
        "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
       },
       "/*/"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/ANY/ApiPermission.RITAApiRITAApiGateway6E112C5C.ANY.."
   }
  },
  "RITAApiGatewayANYApiPermissionTestRITAApiRITAApiGateway6E112C5CANY5698C25B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RITAApiFn455ED49C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:eu-central-1:542508027791:",
       {
        "Ref": "RITAApiGateway5FE42108"
       },
       "/test-invoke-stage/*/"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/ANY/ApiPermission.Test.RITAApiRITAApiGateway6E112C5C.ANY.."
   }
  },
  "RITAApiGatewayANY4B40224D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "ANY",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RITAApiFn455ED49C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Fn::GetAtt": [
      "RITAApiGateway5FE42108",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "RITAApiGateway5FE42108"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiGateway/Default/ANY/Resource"
   }
  },
  "RITAApiKey59D165EB": {
   "Type": "AWS::ApiGateway::ApiKey",
   "Properties": {
    "Enabled": true,
    "Value": "ecab9d62dec87b53fdafdb53542d7ae0"
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAApiKey/Resource"
   }
  },
  "RITAUsagePlanE2747DE0": {
   "Type": "AWS::ApiGateway::UsagePlan",
   "Properties": {
    "ApiStages": [
     {
      "ApiId": {
       "Ref": "RITAApiGateway5FE42108"
      },
      "Stage": {
       "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
      },
      "Throttle": {}
     }
    ],
    "Throttle": {
     "BurstLimit": 10,
     "RateLimit": 50
    },
    "UsagePlanName": "RITAPlan"
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAUsagePlan/Resource"
   }
  },
  "RITAUsagePlanUsagePlanKeyResourceRITAApiRITAApiKey2D2B9DD20C562554": {
   "Type": "AWS::ApiGateway::UsagePlanKey",
   "Properties": {
    "KeyId": {
     "Ref": "RITAApiKey59D165EB"
    },
    "KeyType": "API_KEY",
    "UsagePlanId": {
     "Ref": "RITAUsagePlanE2747DE0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/RITAUsagePlan/UsagePlanKeyResource:RITAApiRITAApiKey2D2B9DD2"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/21Ry07DMBD8lt5d04cQ57YICQEiKuJcuc4StvUj8tqUKMq/s3FC20NPO+O1Z2bXCzm/n8nZRJ1oqsvj1OBeth9R6aPgo10LOsh2C7UnjD40YvPlLqwTtNwpIogkV31hLtdJHyGuFYHQvoR9QlPKtgj+ADr270fYCVSWtb2BrNrXwhvU2WRAnTDK7ksl26fkdETv+t4ZP3q2Cs9WVXDdLyBYJGLWCVVjpSKcVCPb16y1BYqrGodJznCltU8uikeojW8suBz1ivFOqhx0APzUp6Ahz/lPRs0Bv0H89mV/NCKe+7c5t9n3BfKoI/ok1i2MyiPcJnyt60TedJ8CXXWx1omit7swcpJs94MlBLHJnZsZGb+nWCf+jKLhkO5uKecL+TA5EOI08ELQgtwO9Q+2U1Y8KwIAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "RITAApi/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "RITAApiGatewayEndpointE30FDE27": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "RITAApiGateway5FE42108"
      },
      ".execute-api.eu-central-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
      },
      "/"
     ]
    ]
   }
  },
  "ApiUrl": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "RITAApiGateway5FE42108"
      },
      ".execute-api.eu-central-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "RITAApiGatewayDeploymentStageprod7E03EB91"
      },
      "/"
     ]
    ]
   }
  },
  "ApiKey": {
   "Value": "ecab9d62dec87b53fdafdb53542d7ae0"
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}